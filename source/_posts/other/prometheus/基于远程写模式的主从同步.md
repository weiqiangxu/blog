---
title: prometheus远程写入多台prometheus
---

### 打开接收远程写入
```
docker run \
    --name slave_remote \
    -d \
    -p 7979:9090 \
    --network p_net \
    --network-alias slave_remote \
    -v /Users/xuweiqiang/Documents/code/book/other/prometheus/remote_read.yml:/etc/prometheus/prometheus.yml \
    prom/prometheus \
    --web.enable-remote-write-receiver \
    --config.file=/etc/prometheus/prometheus.yml 
```

```
# remote write
global:
  scrape_interval: 15s
  evaluation_interval: 15s
remote_write:
  - url: "http://slave_remote:9090/api/v1/write"
scrape_configs:
  - job_name: "request_count"
    metrics_path: '/metrics'
    static_configs:
      - targets: ["docker.for.mac.host.internal:6969"] # 宿主机IP ifconfig获取 en0 的IP
```


### 主节点
```
docker run \
    --name master_remote \
    -d \
    -p 8989:9090 \
    --network p_net \
    --network-alias master_remote \
    -v /Users/xuweiqiang/Documents/code/book/other/prometheus/remote_write.yml:/etc/prometheus/prometheus.yml \
    prom/prometheus
```
```
# remote read config
global:
  scrape_interval: 15s
  evaluation_interval: 15s
```

[远程存储](https://yunlzheng.gitbook.io/prometheus-book/part-ii-prometheus-jin-jie/readmd/prometheus-remote-storage)


[高可用方案选型](https://yunlzheng.gitbook.io/prometheus-book/part-ii-prometheus-jin-jie/readmd/prometheus-and-high-availability)